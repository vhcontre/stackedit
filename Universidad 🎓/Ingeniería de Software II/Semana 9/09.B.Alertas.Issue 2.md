### ğŸ§© Objetivo del Issue 2

Mostrar los **Ãºltimos 10 movimientos** registrados en el sistema, ordenados por fecha (de mÃ¡s reciente a mÃ¡s antiguo), en una nueva vista web.

---

## âœ… Paso 1: Agregar mÃ©todo al repositorio

En `MovimientoRepository`, agregÃ¡ el siguiente mÃ©todo:

```python
def get_recent_movements(self, limit: int = 10) -> list[Movimiento]:
    movimientos_orm = (
        self.db.query(MovimientoORM)
        .order_by(MovimientoORM.fecha.desc(), MovimientoORM.timestamp.desc())
        .limit(limit)
        .all()
    )
    return [movimiento_orm_to_domain(m) for m in movimientos_orm]
```

ğŸ“ Este mÃ©todo va al final del repositorio `app/repositories/movimiento_repository.py`.

---

## âœ… Paso 2: Crear nueva ruta web en el router

En `app/routers/web_interface.py`, agregÃ¡ una nueva ruta:

```python
@router.get("/web/movimientos-recientes")
def ver_movimientos_recientes(request: Request, db: Session = Depends(get_db)):
    repo = MovimientoRepository(db)
    movimientos = repo.get_recent_movements()
    return templates.TemplateResponse(
        "movimientos_recientes.html",
        {"request": request, "movimientos": movimientos}
    )
```

---

## âœ… Paso 3: Crear plantilla HTML `movimientos_recientes.html`

Ruta: `app/templates/movimientos_recientes.html`

```html
{% extends "base.html" %}

{% block content %}
<h2>ğŸ“œ Ãšltimos Movimientos</h2>

<table border="1">
    <tr>
        <th>Fecha</th>
        <th>Producto</th>
        <th>Usuario</th>
        <th>Tipo</th>
        <th>Cantidad</th>
    </tr>
    {% for mov in movimientos %}
    <tr>
        <td>{{ mov.fecha }}</td>
        <td>{{ mov.producto_id }}</td>
        <td>{{ mov.usuario_id }}</td>
        <td>{{ mov.tipo }}</td>
        <td>{{ mov.cantidad }}</td>
    </tr>
    {% endfor %}
</table>

<a href="/web/productos">ğŸ”™ Volver al listado de productos</a>
{% endblock %}
```

ğŸ“ Al principio usamos IDs para `producto_id` y `usuario_id`. Si mÃ¡s adelante querÃ©s que se vea el nombre del producto o del usuario, podemos hacer un "join" o enriquecer los datos.

---

## âœ… Paso 4: Agregar navegaciÃ³n (opcional pero recomendable)

En `base.html`, podÃ©s agregar este link al header o menÃº:

```html
<a href="/web/movimientos-recientes">ğŸ“œ Ver Ãºltimos movimientos</a>
```

---

## âœ… Paso 5: Test rÃ¡pido (manual)

* EntrÃ¡ a `http://localhost:8000/web/movimientos-recientes`
* VerificÃ¡ que se muestren los movimientos mÃ¡s recientes, ordenados correctamente

---

## âœ… Paso 6: Hacer el commit

Desde la rama `semana-9`, usÃ¡ este mensaje de commit:

```bash
git add .
git commit -m "feat: add recent movements web view

- Crea ruta y plantilla para visualizar Ãºltimos movimientos
- Ordena por fecha y hora descendente
- Enlace agregado en la navegaciÃ³n

Closes #25"
```



<!--stackedit_data:
eyJoaXN0b3J5IjpbNDMzNDcyNDE2XX0=
-->