# 📅 Semana 4 – Gestión de movimientos, Reglas de negocio y pruebas.

| Semana | Objetivos principales                                             |
| ------ | ----------------------------------------------------------------- |
| 4      | 📈 Gestión de movimientos (entrada/salida)                        |
|        | 🔍 Reglas de negocio: stock mínimo, trazabilidad                  |
|        | 🧪 Pruebas unitarias con más lógica                               |

Desarrollo de la **Semana 4**:

---

### ✅ **Semana 4 – Objetivos**

| Tarea                                      | Estado         |
| ------------------------------------------ | -------------- |
| 📦 Gestión de movimientos (entrada/salida) | 🔲 A verificar |
| 📉 Reglas de negocio: stock mínimo         | 🔲 A verificar |
| 🔁 Reglas de negocio: trazabilidad         | 🔲 A verificar |
| 🧪 Pruebas unitarias con más lógica        | 🔲 A verificar |

----
Excelente, gracias por compartir el código. Con esto ya tenés muy bien armadas las **tres capas** de la entidad `Movimiento`:

---

### ✅ Estado actual de `Movimiento` (Semana 4)

| Componente             | Estado  | Observaciones                                                |
| ---------------------- | ------- | ------------------------------------------------------------ |
| Modelo ORM             | ✅ Hecho | Listo en `MovimientoORM`, incluye relaciones, tipos y enums. |
| Modelo de Dominio      | ✅ Hecho | Correctamente definido con `@dataclass` y Enum propio.       |
| Mapper ORM <-> Dominio | ✅ Hecho | Implementado en `movimiento_mapper.py`.                      |
| Pydantic Schemas       | ✅ Hecho | `MovimientoCreate`, `MovimientoUpdate`, `MovimientoOut`.     |

---

### 📌 ¿Qué falta para cerrar la Semana 4?

#### 📦 Gestión de movimientos (entrada/salida)

* [ ] Repositorio con métodos `crear_movimiento`, `listar_movimientos`, `buscar_por_producto`, etc.
* [ ] Consola interactiva (`movimiento_console.py`) para operar desde CLI (alta, baja, listado).

#### 🔍 Reglas de negocio

* [ ] **Stock mínimo**: Al intentar registrar un `egreso`, verificar que haya suficiente stock.
* [ ] **Trazabilidad**: Poder listar todos los movimientos asociados a un producto (por ejemplo, por SKU o ID).

#### 🧪 Pruebas unitarias con lógica

* [ ] Pruebas para el repositorio de movimientos.
* [ ] Pruebas que verifiquen que no se puede hacer un egreso si no hay stock.
* [ ] Pruebas que aseguren que se guarda bien la trazabilidad de un producto.

---

### ✅ Próximo paso recomendado

Podés empezar creando el **repositorio `MovimientoRepository`**, por ejemplo en:

```
app/repositories/movimiento_repository.py
```

Con métodos como:

* `create_movimiento`
* `get_all_movimientos`
* `get_movimientos_por_producto(producto_id)`
* Validaciones: stock disponible, tipo de movimiento, etc.



<!--stackedit_data:
eyJoaXN0b3J5IjpbNTk3NTYxMTc0LDkwOTgwNDQ0NF19
-->