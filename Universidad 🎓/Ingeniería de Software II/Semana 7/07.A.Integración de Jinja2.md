## ğŸ“… IntegraciÃ³n de Jinja2

| Semana | Objetivos principales                                             |
| ------ | ----------------------------------------------------------------- |
| 7      | ğŸŒ IntegraciÃ³n de Jinja2 para interfaz web                        |
|        | ğŸ“„ CreaciÃ³n de plantillas y rutas web bÃ¡sicas                     |

---

## âœ… Â¿QuÃ© haremos ahora?

1. UsarÃ¡s `Jinja2` dentro de tu proyecto FastAPI.
2. Serviremos plantillas HTML desde `app/templates/`.
3. Serviremos archivos estÃ¡ticos desde `app/static/`.
4. Crearemos una ruta como `/web/productos` que renderice una tabla de productos desde la base de datos.

---

## ğŸ§© PASO A PASO para integrar Jinja2 en tu proyecto `inventario-2025`

---

### ğŸ”§ Paso 1: Asegurate de tener `Jinja2` y `aiofiles` instalados

```bash
pip install jinja2 aiofiles
```

> `aiofiles` es necesario para servir archivos estÃ¡ticos con `FastAPI`.

---

### ğŸ§± Paso 2: Configurar plantillas y estÃ¡ticos en `main.py`

En `app/main.py`, agregÃ¡ al inicio:

```python
from fastapi import FastAPI, Request
from fastapi.staticfiles import StaticFiles
from fastapi.templating import Jinja2Templates
from pathlib import Path
```

Y en la instancia principal de FastAPI:

```python
app = FastAPI()

BASE_DIR = Path(__file__).resolve().parent

# Archivos estÃ¡ticos (CSS, JS, imÃ¡genes)
app.mount("/static", StaticFiles(directory=BASE_DIR / "static"), name="static")

# Plantillas HTML
templates = Jinja2Templates(directory=BASE_DIR / "templates")
```

---

### ğŸ—‚ï¸ Paso 3: Crear carpetas y archivos

Asegurate de tener esta estructura ya creada dentro de `backend/app/`:

```
app/
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ base.html
â”‚   â””â”€â”€ productos.html
â”œâ”€â”€ static/
â”‚   â””â”€â”€ styles.css  (opcional)
```

---

### ğŸ§ª Paso 4: Crear la plantilla base (`base.html`)

```html
<!-- app/templates/base.html -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Inventario{% endblock %}</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <header>
        <h1>ğŸ“¦ Sistema de Inventario</h1>
        <nav>
            <a href="/web/productos">Productos</a>
        </nav>
    </header>

    <main>
        {% block content %}{% endblock %}
    </main>
</body>
</html>
```

---

### ğŸ“¦ Paso 5: Crear plantilla de productos (`productos.html`)

```html
{% extends "base.html" %}

{% block title %}Listado de Productos{% endblock %}

{% block content %}
<h2>ğŸ“‹ Listado de Productos</h2>

<table border="1" cellspacing="0" cellpadding="8">
    <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>SKU</th>
        <th>DescripciÃ³n</th>
        <th>Stock Actual</th>
        <th>Stock MÃ­nimo</th>
    </tr>
    {% for producto in productos %}
    <tr>
        <td>{{ producto.id }}</td>
        <td>{{ producto.nombre }}</td>
        <td>{{ producto.sku }}</td>
        <td>{{ producto.descripcion }}</td>
        <td>{{ producto.stock }}</td>
        <td>{{ producto.stock_minimo }}</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}

```

---

### ğŸš Paso 6: Crear ruta en FastAPI (`app/routers/web_interface.py`)

```python
from fastapi import APIRouter, Request, Depends
from sqlalchemy.orm import Session
from app.db.session import get_db
from app.repositories.producto_repository import ProductoRepository 
from app.web_ui import templates

router = APIRouter()

@router.get("/web/productos")
def ver_productos(request: Request, db: Session = Depends(get_db)):
    repo = ProductoRepository(db)
    productos = repo.get_all_productos()
    return templates.TemplateResponse("productos.html", {"request": request, "productos": productos})
```

> AjustÃ¡ el nombre del repositorio y esquema segÃºn tu implementaciÃ³n real (`producto_repo`, `schemas.Producto`, etc.).

---

### âš™ï¸ Paso 7: Registrar el router en `main.py`

En `app/main.py`, agregÃ¡:

```python
from app.routers import web_interface

app.include_router(web_interface.router)
```
---
## âœ… **Reporte Consolidado â€“ Semana 7 (IS2 - Proyecto Inventario 2025)**

### ğŸ“… Semana trabajada: **Semana 7**

### ğŸ¯ Objetivos planificados

| Objetivo                                      | Estado     |
| --------------------------------------------- | ---------- |
| ğŸŒ IntegraciÃ³n de Jinja2 para interfaz web    | âœ… Cumplido |
| ğŸ“„ CreaciÃ³n de plantillas y rutas web bÃ¡sicas | âœ… Cumplido |

---

### ğŸ§  Aprendizajes / decisiones tÃ©cnicas

| Tema                                | Detalle                                                                              |
| ----------------------------------- | ------------------------------------------------------------------------------------ |
| ğŸ”§ Motor de plantillas              | Se integrÃ³ **Jinja2** para renderizado dinÃ¡mico de vistas HTML                       |
| ğŸ“ OrganizaciÃ³n de archivos         | Se usaron las carpetas `/templates` y `/static` para vistas y estilos                |
| ğŸ“‚ ModularizaciÃ³n                   | Se separaron las rutas de interfaz web en un archivo especÃ­fico (`web_interface.py`) |
| ğŸ” Evitado de ciclos de importaciÃ³n | Se resolviÃ³ correctamente un ciclo circular entre `main.py` y `templates`            |
| ğŸ” RevisiÃ³n de dependencias         | Se detectÃ³ y resolviÃ³ falta de `python-multipart` para futuros formularios           |

---

### âœ… Avances realizados

| ImplementaciÃ³n                                     | Estado                         |
| -------------------------------------------------- | ------------------------------ |
| ğŸ“„ Vista web `/web/productos`                      | âœ… Funcional                    |
| ğŸ§± Plantilla base `base.html` con layout comÃºn     | âœ… Hecho                        |
| ğŸ§­ MenÃº de navegaciÃ³n entre secciones              | âœ… Agregado (opcional sugerido) |
| ğŸ“Š VisualizaciÃ³n del stock en tabla                | âœ… Agregado (opcional sugerido) |
| ğŸ”— IntegraciÃ³n estable con backend y base de datos | âœ… Hecho                        |
| ğŸ§ª ValidaciÃ³n visual en navegador (localhost)      | âœ… Aprobado                     |

---

### ğŸ“¦ Estado del proyecto al cierre de Semana 7

* Motor web **funcionando con FastAPI + Jinja2**
* NavegaciÃ³n simple y tabla funcional con productos desde la base de datos
* Interfaz limpia, preparada para sumar formularios en Semana 8
* Tests pasando localmente
* GitHub Actions funcionando tras corregir dependencias (`python-multipart`)
* VersiÃ³n estable lista para entregable/documentaciÃ³n

---

### ğŸ” Archivos clave modificados / creados

* `app/templates/base.html` â†’ Plantilla general
* `app/templates/productos.html` â†’ Vista con productos
* `app/routers/web_interface.py` â†’ Nuevas rutas web
* `app/main.py` â†’ IntegraciÃ³n de `Jinja2Templates` y nuevo router
* `requirements.txt` â†’ Incluye `python-multipart`

---

### ğŸ“˜ RecomendaciÃ³n

Antes de avanzar a la **Semana 8**:

* âœ… VerificÃ¡ que todos los tests pasen
* âœ… SubÃ­ los cambios al branch principal con un nuevo **tag (`v1.1`)**
* âœ… ActualizÃ¡ la documentaciÃ³n en `docs/semana-07/`

---

Â¿QuerÃ©s que te prepare un changelog para la `semana-07/README.md` o el contenido del changelog general (`changelog.md`)?





<!--stackedit_data:
eyJoaXN0b3J5IjpbMjE3MjkwMjMsLTkwOTQ3NTc0NCwxNTE1MD
Q5MTQ0LDE0NDg5Nzg5NzFdfQ==
-->